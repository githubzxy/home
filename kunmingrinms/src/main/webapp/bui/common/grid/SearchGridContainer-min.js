define("common/grid/SearchGridContainer",["bui/common","common/container/FieldsetContainer","common/search/SearchForm","common/grid/GridBtn"],function(require){var BUI=require("bui/common"),Component=BUI.Component,FieldSet=require("common/container/FieldsetContainer"),SearchForm=require("common/search/SearchForm"),GridBtn=require("common/grid/GridBtn");return Component.Controller.extend({initializer:function(){var _self=this,searchForm=_self._initSearchForm(),searchGrid=_self._initSearchGrid(),up=new FieldSet({id:"searchFormFieldSet",title:"查询",items:[searchForm]}),down=new FieldSet({id:"searchGridFieldSet",title:"列表",items:[searchGrid]});_self.addChild(up),_self.addChild(down)},renderUI:function(){this._calGridSize()},bindUI:function(){var _self=this,store=_self.get("store");_self.getChild("searchForm",!0).on("formSearch",function(e){var param=e.param;store.load(param)}),$(window).on("resize",function(){_self._calGridSize()})},_calGridSize:function(){var _self=this,searchForm=_self.getChild("searchFormFieldSet",!0),searchGrid=_self.getChild("searchGrid",!0),formHeight=searchForm.get("el").outerHeight(!0),extHeight=formHeight-searchForm.get("el").height();searchGrid.set("height",$(window).height()-21-formHeight-3*extHeight),searchGrid.set("width",searchForm.get("el").width())},_initSearchForm:function(){var _self=this,searchFormCfg=BUI.merge(_self.get("searchForm"),{id:"searchForm"});return new SearchForm(searchFormCfg)},_initSearchGrid:function(){var _self=this,searchGridCfg=BUI.merge(_self.get("searchGrid"),{id:"searchGrid",store:_self.get("store"),columns:_self.get("columns"),width:"100%",idField:"id",loadMask:!0});return new GridBtn(searchGridCfg)}},{ATTRS:{searchForm:{},columns:{value:[]},store:{},searchGrid:{},height:{value:$(window).height()-21}},SEARCH_FORM_ID:"searchForm",SEARCH_GRID_ID:"searchGrid",TAB_HEIGHT:21})});